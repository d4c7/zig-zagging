<!DOCTYPE html>
<html lang="es" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Un analizador de línea de comandos en Zig 🔧 (Parte I) | Zig-zagueando Blog</title>
<meta name="keywords" content="Zig, Análisis de argumentos de la línea de comandos, zig-clap, Programación en Zig, Argumentos de la línea de comandos en Zig, zig-argueando, zig-args">
<meta name="description" content="¡Hola a todos! 👋 Hoy vamos a hablar de un tema muy interesante: cómo analizar los argumentos de la línea de comandos. ¡Prepárate para una profunda inmersión! 🌊🏊‍♂️
Introducción a los Argumentos de la Línea de Comandos 📝 Los argumentos de la línea de comandos son una forma común de especificar opciones para programas ejecutables. Son especialmente útiles para interactuar con tu programa de forma flexible y potente. En esencia, los argumentos de la línea de comandos son una lista de palabras que se pasan a un programa cuando se invoca.">
<meta name="author" content="d4c7">
<link rel="canonical" href="https://d4c7.github.io/zig-zagueando/posts/un-analizador-de-linea-de-comandos-en-zig-1/">
<link crossorigin="anonymous" href="/zig-zagueando/assets/css/stylesheet.8e8af8c7897af6457d28b7ea77a4d4acf670934d081625a7b0ec0a87f8fcbfcf.css" integrity="sha256-jor4x4l69kV9KLfqd6TUrPZwk00IFiWnsOwKh/j8v88=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/zig-zagueando/assets/js/highlight.9a8019f45628f095e5668671b3b0e124b8cf7dda465f36166dcc239c8748a257.js" integrity="sha256-moAZ9FYo8JXlZoZxs7DhJLjPfdpGXzYWbcwjnIdIolc="
    onload="hljs.configure({ignoreUnescapedHTML:true});hljs.highlightAll();"></script>
<link rel="icon" href="https://d4c7.github.io/zig-zagueando/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://d4c7.github.io/zig-zagueando/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://d4c7.github.io/zig-zagueando/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://d4c7.github.io/zig-zagueando/apple-touch-icon.png">
<link rel="mask-icon" href="https://d4c7.github.io/zig-zagueando/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<noscript>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@600&family=Tajawal:wght@300&display=swap" rel="stylesheet">
</noscript>

<link rel="preload" href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@600&family=Tajawal:wght@300&display=swapp" as="style" onload="this.onload=null;this.rel='stylesheet'">



<script async src="https://www.googletagmanager.com/gtag/js?id=G-59LR4NE7W9"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-59LR4NE7W9', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Un analizador de línea de comandos en Zig 🔧 (Parte I)" />
<meta property="og:description" content="¡Hola a todos! 👋 Hoy vamos a hablar de un tema muy interesante: cómo analizar los argumentos de la línea de comandos. ¡Prepárate para una profunda inmersión! 🌊🏊‍♂️
Introducción a los Argumentos de la Línea de Comandos 📝 Los argumentos de la línea de comandos son una forma común de especificar opciones para programas ejecutables. Son especialmente útiles para interactuar con tu programa de forma flexible y potente. En esencia, los argumentos de la línea de comandos son una lista de palabras que se pasan a un programa cuando se invoca." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://d4c7.github.io/zig-zagueando/posts/un-analizador-de-linea-de-comandos-en-zig-1/" />
<meta property="og:image" content="https://d4c7.github.io/zig-zagueando/covers/un-analizador-de-linea-de-comandos-en-zig.webp" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-25T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-06-25T00:00:00+00:00" /><meta property="og:site_name" content="Programando con Zig" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://d4c7.github.io/zig-zagueando/covers/un-analizador-de-linea-de-comandos-en-zig.webp" />
<meta name="twitter:title" content="Un analizador de línea de comandos en Zig 🔧 (Parte I)"/>
<meta name="twitter:description" content="¡Hola a todos! 👋 Hoy vamos a hablar de un tema muy interesante: cómo analizar los argumentos de la línea de comandos. ¡Prepárate para una profunda inmersión! 🌊🏊‍♂️
Introducción a los Argumentos de la Línea de Comandos 📝 Los argumentos de la línea de comandos son una forma común de especificar opciones para programas ejecutables. Son especialmente útiles para interactuar con tu programa de forma flexible y potente. En esencia, los argumentos de la línea de comandos son una lista de palabras que se pasan a un programa cuando se invoca."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://d4c7.github.io/zig-zagueando/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Un analizador de línea de comandos en Zig 🔧 (Parte I)",
      "item": "https://d4c7.github.io/zig-zagueando/posts/un-analizador-de-linea-de-comandos-en-zig-1/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Un analizador de línea de comandos en Zig 🔧 (Parte I)",
  "name": "Un analizador de línea de comandos en Zig 🔧 (Parte I)",
  "description": "¡Hola a todos! 👋 Hoy vamos a hablar de un tema muy interesante: cómo analizar los argumentos de la línea de comandos. ¡Prepárate para una profunda inmersión! 🌊🏊‍♂️\nIntroducción a los Argumentos de la Línea de Comandos 📝 Los argumentos de la línea de comandos son una forma común de especificar opciones para programas ejecutables. Son especialmente útiles para interactuar con tu programa de forma flexible y potente. En esencia, los argumentos de la línea de comandos son una lista de palabras que se pasan a un programa cuando se invoca.",
  "keywords": [
    "Zig", "Análisis de argumentos de la línea de comandos", "zig-clap", "Programación en Zig", "Argumentos de la línea de comandos en Zig", "zig-argueando", "zig-args"
  ],
  "articleBody": "¡Hola a todos! 👋 Hoy vamos a hablar de un tema muy interesante: cómo analizar los argumentos de la línea de comandos. ¡Prepárate para una profunda inmersión! 🌊🏊‍♂️\nIntroducción a los Argumentos de la Línea de Comandos 📝 Los argumentos de la línea de comandos son una forma común de especificar opciones para programas ejecutables. Son especialmente útiles para interactuar con tu programa de forma flexible y potente. En esencia, los argumentos de la línea de comandos son una lista de palabras que se pasan a un programa cuando se invoca. ¿Pero cómo se manejan en Zig? ¡Vamos a descubrirlo! 🕵️‍♀️\nArgumentos de la Línea de Comandos en Zig 🧮 En Zig, la sintaxis para los argumentos de la línea de comandos es bastante sencilla. Cuando se inicia un programa, los argumentos de la línea de comandos se pasan como una matriz de cadenas. Puedes recuperar argumentos de la línea de comandos usando la estructura std.process.ArgIterator e inicializándola con initWithAllocator(allocator: Allocator) si queremos abstraernos de la plataforma. Con este iterador podemos recorrer los argumentos, pero a menudo necesitamos un poco más de funcionalidad.\nvar it = try std.process.ArgIterator.initWithAllocator(allocator); defer it.deinit(); while (it.next()) |arg| { std.debug.print(\"{s}\\n\", .{arg}); } También podemos usar std.process.ArgIterator.init() sin necesidad de allocator pero en la práctica la opción anterior es la más recomendable, teniendo además en cuenta que el uso de un parsing más sofisticado de los argumentos casi seguro requerirá de un asignador de memoria.\nPróximamente: Aprende sobre allocators en el artículo “Memoria en Zig”\nBibliotecas de análisis Es cuando necesitamos más funcionalidad cuando entran las bibliotecas de análisis como ‘zig-clap’ o ‘zig-args’:\nPróximamente: Aprende sobre el uso de librerías en Zig en el artículo “Las librerías de Zig”\nzig-clap: Es una biblioteca simple y fácil de usar para el análisis de argumentos de línea de comando en Zig. Ofrece características como argumentos cortos y largos, soporte para pasar valores usando espacios y ‘=’, opciones que pueden ser especificadas múltiples veces, impresión y análisis de mensajes de ayuda a partir de especificaciones de parámetros. En esencia le pasamos una definición en forma de texto de cómo queremos parsear los argumentos y nos creará una estructura, en tiempo de compilación, para esa definición. Luego rellenaremos una instancia de la estructura con las opciones y argumentos pasados al programa.\nAprende todo sobre tiempo de compilación en “Zig comptime”\n⚠️ ¡Atención, programador! Este post utiliza la versión 0.11.0-dev.3971 de Zig\nconst params = comptime clap.parseParamsComptime( \\\\-h, --help Display this help and exit. \\\\-n, --number An option parameter, which takes a value. \\\\-s, --string ... An option parameter which can be specified multiple times. \\\\... \\\\ ); var diag = clap.Diagnostic{}; var res = clap.parse(clap.Help, \u0026params, clap.parsers.default, .{ .diagnostic = \u0026diag, }) catch |err| { diag.report(std.io.getStdErr().writer(), err) catch {}; return err; }; defer res.deinit(); if (res.args.help != 0) return clap.help(std.io.getStdErr().writer(), clap.Help, \u0026params, .{}); if (res.args.number) |n| std.debug.print(\"--number = {}\\n\", .{n}); for (res.args.string) |s| std.debug.print(\"--string = {s}\\n\", .{s}); std.debug.print(\"positional arguments:\\n\", .{}); for (res.positionals) |pos| { std.debug.print(\"{s}\\n\", .{pos}); } En ‘zig-clap’, puedes manejar casos más complejos, como subcomandos o argumentos opcionales y definir tu propio parsing de argumentos con clap.parsers.default. 💡\nEs esencial manejar errores al analizar argumentos de la línea de comandos. En ‘zig-clap’, puedes usar la estructura Diagnostics para informar errores útiles. 🚑\nzig-args: Este es otro módulo de Zig para el análisis de argumentos de línea de comando. Proporciona funciones para analizar argumentos para una especificación dada y nuestro proceso actual, con opciones para manejar errores de análisis. También permite el uso de un método ‘Verb’, lo que significa que el primer argumento posicional se interpreta como un verbo que puede ser considerado un subcomando que proporciona más opciones específicas. A diferencia de clap, definimos las opciones y argumentos en una estructura que se rellenará al analizar los argumentos.\nconst options = try argsParser.parseForCurrentProcess(struct { // This declares long options for double hyphen output: ?[]const u8 = null, @\"with-offset\": bool = false, @\"with-hexdump\": bool = false, @\"intermix-source\": bool = false, numberOfBytes: ?i32 = null, signed_number: ?i64 = null, unsigned_number: ?u64 = null, mode: enum { default, special, slow, fast } = .default, // This declares short-hand options for single hyphen pub const shorthands = .{ .S = \"intermix-source\", .b = \"with-hexdump\", .O = \"with-offset\", .o = \"output\", }; }, allocator, .print); defer options.deinit(); if (options.executable_name) |exe| { std.debug.print(\"executable name: {s}\\n\", .{exe}); } std.debug.print(\"parsed options:\\n\", .{}); inline for (std.meta.fields(@TypeOf(options.options))) |fld| { std.debug.print(\"\\t{s} = {any}\\n\", .{ fld.name, @field(options.options, fld.name), }); } std.debug.print(\"parsed positionals:\\n\", .{}); for (options.positionals) |arg| { std.debug.print(\"\\t'{s}'\\n\", .{arg}); } Nuestro propio analizador 🤓 Usar una biblioteca probada es lo que uno debe hacer normalmente y no inventar la rueda a la primera de cambio. Pero estamos aquí para aprender y divertirnos con Zig, así que no vamos a dejar pasar la oportunidad de implementar nuestro propio analizador de argumentos de línea de comando. ¡Sí, lo has oído bien! 🎉🎉.\nAprenderás una cantidad increíble en el proceso. Vas a entender mejor cómo funcionan las cosas bajo el capó, cómo los argumentos pasan de la línea de comandos a tu programa y cómo puedes manipularlos para hacer exactamente lo que quieres. ¡Es como tener superpoderes! 💪🚀 Así que, poneros cómodos, preparaos una taza de vuestro café o te favorito ☕ y ¡vamos a ello, creemos nuestra propia biblioteca de análisis de argumentos de línea de comando: zig-argueando! 🎯\nConvenciones POSIX Nuestro analizado implementará, en general, las convenciones recomendadas por POSIX para los argumentos de la línea de comandos:\nLos argumentos son opciones cortas si comienzan con un delimitador de guión (-) más un caracter alfanuméricos individuales u opviones largar si empiezan con doble guión (--) con un nombre largo. Varias opciones cortas pueden seguir a un delimitador de guión en un solo token si las opciones no toman argumentos. Por lo tanto, -abc es equivalente a -a -b -c. La última opción si podrá tener argumento. Algunas opciones requieren un argumento. Por ejemplo, la opción -o del comando ld requiere un argumento, un nombre de archivo de salida. Las opciones normalmente preceden a otros argumentos que no son opciones y que se llaman posicionales. Los argumentos de las opciones pueden ir en el mismo token si la opción y su argumento está separado por un separador. Por ejemplo, -a=foo o --name=value en lugar de -a foo o --name value Un argumento que es exactamente doble guión (--) indica que a partir de ese argumentos todos los demás son posicionales. Un argumento que es exactamente un guión (-) se tratará como posicional. Suele indicar entrada o salida estandar. Las opciones se pueden suministrar en cualquier orden. Pero nos saldremos un poco de las convenciones en estos aspectos, por otra parte discutibles:\nUna opción y su argumento pueden aparecer o no como tokens separados. En otras palabras, el espacio en blanco que los separa es opcional. Por lo tanto, -o foo y -ofoo son equivalentes. Pero nuestro analizador no va a permitir esto ya que puede dar lugar a ambigüedades. Los nombres de las opciones deben escribirse completamente y daremos la opción como desconocida si es parcial aunque no haya conflicto. Si la opción es --host no podrá escribirse como --hos, ni --ho, ni --h. Las opciones pueden aparecer varias veces pero sólo si son opciones que lo permiten explícitamente o tienen el mismo valor. Nada de la última opción gana, buff. Necesitamos un plan Estos son una serie de tareas iniciales para diseñar un parser de línea de comandos en Zig:\nDiseñar la estructura de datos de los argumentos\nDefine una estructura de datos que represente un argumento de línea de comandos. Esta estructura debe contener información como el nombre corto de la opción (si existe), el nombre largo (si existe), si la opción necesita un valor, y cualquier valor predeterminado o proporcionado por el usuario.\nImplementar la función de análisis de argumentos\nEsta función debería tomar la lista de argumentos proporcionados por el usuario (generalmente a través de std.process.args()) y llenar la estructura de datos definida anteriormente. Debe ser capaz de manejar tanto argumentos cortos (-a) como largos (--arg), y debe manejar correctamente los argumentos que requieren valores (-o value o -o value o --option=value). También debe ser capaz de manejar el caso especial de --, que indica el final de los argumentos.\nImplementar el manejo de errores\nSi el usuario proporciona un argumento que no se reconoce, o si se proporciona un valor para un argumento que no requiere uno, el parser debe ser capaz de manejar esto de manera elegante. Esto puede incluir la generación de mensajes de error útiles.\nImplementar funciones de ayuda\nProporcionar funciones que generen automáticamente mensajes de ayuda basados en las estructuras de argumentos definidas. Esto puede incluir una descripción del comando y de cada argumento, si se requiere un valor, y cualquier valor predeterminado.\nPruebas\nProbaremos completamente el parser de línea de comandos. Esto incluirá pruebas para argumentos cortos y largos, argumentos con y sin valores, el indicador --, y el manejo de errores.\nFin de la primera parte 🌟 No te pierdas las siguientes partes donde comenzaremos a implementar el analizador explicando paso a paso lo que hacemos. ¡Nos vemos! Un ejemplo de lo que vamos a programar:\nconst clp = comptime Argueando.CommandLineParser.init(.{ .header= \\\\ \\ | \\\\ _ \\ __| _` | | | _ \\ _` | __ \\ _` | _ \\ \\\\ ___ \\ | ( | | | __/ ( | | | ( | ( | \\\\_/ _\\ _| \\__, | \\__,_| \\___| \\__,_| _| _| \\__,_| \\___/ \\\\ |___/ ,.params = \u0026[_]Argueando.Param{ flagHelp(.{ .long = \"help\", .short = \"h\", .help = \"Shows this help.\" }), flag(.{ .long = \"version\", .help = \"Output version information and exit.\" }), flag(.{ .long = \"verbose\", .short = \"v\", .help = \"Enable verbose output.\" }), option(.{ .long = \"port\", .short = \"p\", .parser = \"TCP_PORT\", .default = \"1234\", .help = \"Listening Port.\" }), option(.{ .long = \"host\", .short = \"H\", .parser = \"TCP_HOST\", .default = \"localhost\", .help = \"Host name\" }), singlePositional(.{ .parser = \"DIR\", .default = \".\", .check = \u0026Check.Dir(.{ .mode = .read_only }).f }), }, // .desc = \"This command starts an HTTP Server and serves static content from directory DIR.\", // .footer = \"More info: .\", }); var s = clp.parseArgs(allocator); defer s.deinit(); if (s.helpRequested()) { try s.printHelp(std.io.getStdErr().writer()); return; } if (s.hasProblems()) { try s.printProblems(std.io.getStdErr().writer(), .AllProblems); return; } \\ | _ \\ __| _` | | | _ \\ _` | __ \\ _` | _ \\ ___ \\ | ( | | | __/ ( | | | ( | ( | _/ _\\ _| \\__, | \\__,_| \\___| \\__,_| _| _| \\__,_| \\___/ |___/ Usage: sample-argueando [(-h|--help)] [--version] [(-v|--verbose)] [(-p|--port)=TCP_PORT] [(-H|--host)=TCP_HOST] [DIR] This command starts an HTTP Server and serves static content from directory DIR. -h, --help Shows this help. --version Output version information and exit. -v, --verbose Enable verbose output. -p, --port=TCP_PORT Listening Port. Default value: 1234 -H, --host=TCP_HOST Host name Default value: localhost TCP_PORT TCP port value between 0 and 65535. Use port 0 to dynamically assign a port Can use base prefix (0x,0o,0b). TCP_HOST TCP host name or IP. DIR Directory More info: . ",
  "wordCount" : "1852",
  "inLanguage": "es",
  "image":"https://d4c7.github.io/zig-zagueando/covers/un-analizador-de-linea-de-comandos-en-zig.webp","datePublished": "2023-06-25T00:00:00Z",
  "dateModified": "2023-06-25T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "d4c7"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://d4c7.github.io/zig-zagueando/posts/un-analizador-de-linea-de-comandos-en-zig-1/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Zig-zagueando Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://d4c7.github.io/zig-zagueando/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://d4c7.github.io/zig-zagueando/" accesskey="h" title="Zig-zagueando Blog (Alt + H)">Zig-zagueando Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://d4c7.github.io/zig-zagueando/search/" title="Buscar">
                    <span>Buscar</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://d4c7.github.io/zig-zagueando/">Inicio</a>&nbsp;»&nbsp;<a href="https://d4c7.github.io/zig-zagueando/posts/">Posts</a></div>
    <h1 class="post-title">
      Un analizador de línea de comandos en Zig 🔧 (Parte I)
    </h1>
    <div class="post-meta"><span title='2023-06-25 00:00:00 +0000 +0000'>junio 25, 2023</span>&nbsp;·&nbsp;9 min&nbsp;·&nbsp;1852 palabras&nbsp;·&nbsp;d4c7

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://d4c7.github.io/zig-zagueando/covers/un-analizador-de-linea-de-comandos-en-zig.webp" alt="">
        
</figure><div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Tabla de Contenidos</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#introducción-a-los-argumentos-de-la-línea-de-comandos-">Introducción a los Argumentos de la Línea de Comandos 📝</a></li>
    <li><a href="#argumentos-de-la-línea-de-comandos-en-zig-">Argumentos de la Línea de Comandos en Zig 🧮</a></li>
    <li><a href="#bibliotecas-de-análisis">Bibliotecas de análisis</a></li>
    <li><a href="#nuestro-propio-analizador-">Nuestro propio analizador 🤓</a></li>
    <li><a href="#convenciones-posix">Convenciones POSIX</a></li>
    <li><a href="#necesitamos-un-plan">Necesitamos un plan</a></li>
    <li><a href="#fin-de-la-primera-parte-">Fin de la primera parte 🌟</a></li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><p>¡Hola a todos! 👋 Hoy vamos a hablar de un tema muy interesante: cómo analizar los argumentos de la línea de comandos. ¡Prepárate para una profunda inmersión! 🌊🏊‍♂️</p>
<h2 id="introducción-a-los-argumentos-de-la-línea-de-comandos-">Introducción a los Argumentos de la Línea de Comandos 📝<a hidden class="anchor" aria-hidden="true" href="#introducción-a-los-argumentos-de-la-línea-de-comandos-">#</a></h2>
<p>Los argumentos de la línea de comandos son una forma común de especificar opciones para programas ejecutables. Son especialmente útiles para interactuar con tu programa de forma flexible y potente. En esencia, los argumentos de la línea de comandos son una lista de palabras que se pasan a un programa cuando se invoca. ¿Pero cómo se manejan en Zig? ¡Vamos a descubrirlo! 🕵️‍♀️</p>
<h2 id="argumentos-de-la-línea-de-comandos-en-zig-">Argumentos de la Línea de Comandos en Zig 🧮<a hidden class="anchor" aria-hidden="true" href="#argumentos-de-la-línea-de-comandos-en-zig-">#</a></h2>
<p>En Zig, la sintaxis para los argumentos de la línea de comandos es bastante sencilla. Cuando se inicia un programa, los argumentos de la línea de comandos se pasan como una matriz de cadenas. Puedes recuperar argumentos de la línea de comandos usando la estructura <code>std.process.ArgIterator</code> e inicializándola con <code>initWithAllocator(allocator: Allocator)</code> si queremos abstraernos de la plataforma. Con este iterador podemos recorrer los argumentos, pero a menudo necesitamos un poco más de funcionalidad.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">var</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">std</span><span class="p">.</span><span class="n">process</span><span class="p">.</span><span class="n">ArgIterator</span><span class="p">.</span><span class="n">initWithAllocator</span><span class="p">(</span><span class="n">allocator</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">defer</span><span class="w"> </span><span class="n">it</span><span class="p">.</span><span class="n">deinit</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="n">next</span><span class="p">())</span><span class="w"> </span><span class="o">|</span><span class="n">arg</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">std</span><span class="p">.</span><span class="n">debug</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;{s}</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="n">arg</span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>También podemos usar <code>std.process.ArgIterator.init()</code> sin necesidad de allocator pero en la práctica la opción anterior es la más recomendable, teniendo además en cuenta que el uso de un parsing más sofisticado de los argumentos casi seguro requerirá de un asignador de memoria.</p>
<blockquote>
<p>Próximamente: Aprende sobre allocators en el artículo &ldquo;Memoria en Zig&rdquo;</p>
</blockquote>
<h2 id="bibliotecas-de-análisis">Bibliotecas de análisis<a hidden class="anchor" aria-hidden="true" href="#bibliotecas-de-análisis">#</a></h2>
<p>Es cuando necesitamos más funcionalidad cuando entran las bibliotecas de análisis como &lsquo;zig-clap&rsquo; o &lsquo;zig-args&rsquo;:</p>
<blockquote>
<p>Próximamente: Aprende sobre el uso de librerías en Zig en el artículo &ldquo;Las librerías de Zig&rdquo;</p>
</blockquote>
<ol>
<li><strong>zig-clap:</strong> Es una biblioteca simple y fácil de usar para el análisis de argumentos de línea de comando en Zig. Ofrece características como argumentos cortos y largos, soporte para pasar valores usando espacios y &lsquo;=&rsquo;, opciones que pueden ser especificadas múltiples veces, impresión y análisis de mensajes de ayuda a partir de especificaciones de parámetros.</li>
</ol>
<p>En esencia le pasamos una definición en forma de texto de cómo queremos parsear los argumentos y nos creará una estructura, en tiempo de compilación, para esa definición. Luego rellenaremos una instancia de la estructura con las opciones y argumentos pasados al programa.</p>
<blockquote>
<p>Aprende todo sobre tiempo de compilación en <a href="https://d4c7.github.io/zig-zagueando/posts/zig-comptime/">&ldquo;Zig comptime&rdquo;</a></p>
</blockquote>
<blockquote>
<p>⚠️ <em>¡Atención, programador! Este post utiliza la versión 0.11.0-dev.3971 de Zig</em></p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">const</span><span class="w"> </span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">comptime</span><span class="w"> </span><span class="n">clap</span><span class="p">.</span><span class="n">parseParamsComptime</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="sh">\\-h, --help             Display this help and exit.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="sh">\\-n, --number &lt;usize&gt;   An option parameter, which takes a value.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="sh">\\-s, --string &lt;str&gt;...  An option parameter which can be specified multiple times.</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="sh">\\&lt;str&gt;...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="sh">\\</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kr">var</span><span class="w"> </span><span class="n">diag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clap</span><span class="p">.</span><span class="n">Diagnostic</span><span class="p">{};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kr">var</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clap</span><span class="p">.</span><span class="n">parse</span><span class="p">(</span><span class="n">clap</span><span class="p">.</span><span class="n">Help</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">params</span><span class="p">,</span><span class="w"> </span><span class="n">clap</span><span class="p">.</span><span class="n">parsers</span><span class="p">.</span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">.</span><span class="n">diagnostic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">diag</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">})</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="o">|</span><span class="n">err</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="n">diag</span><span class="p">.</span><span class="n">report</span><span class="p">(</span><span class="n">std</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">getStdErr</span><span class="p">().</span><span class="n">writer</span><span class="p">(),</span><span class="w"> </span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">{};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">err</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">defer</span><span class="w"> </span><span class="n">res</span><span class="p">.</span><span class="n">deinit</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">args</span><span class="p">.</span><span class="n">help</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="n">clap</span><span class="p">.</span><span class="n">help</span><span class="p">(</span><span class="n">std</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">getStdErr</span><span class="p">().</span><span class="n">writer</span><span class="p">(),</span><span class="w"> </span><span class="n">clap</span><span class="p">.</span><span class="n">Help</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">params</span><span class="p">,</span><span class="w"> </span><span class="p">.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">args</span><span class="p">.</span><span class="n">number</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="n">n</span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">std</span><span class="p">.</span><span class="n">debug</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;--number = {}</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="n">n</span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">args</span><span class="p">.</span><span class="n">string</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="n">s</span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">std</span><span class="p">.</span><span class="n">debug</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;--string = {s}</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="n">s</span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">std</span><span class="p">.</span><span class="n">debug</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;positional arguments:</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">res</span><span class="p">.</span><span class="n">positionals</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="n">pos</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">std</span><span class="p">.</span><span class="n">debug</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;{s}</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="n">pos</span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>En &lsquo;zig-clap&rsquo;, puedes manejar casos más complejos, como subcomandos o argumentos opcionales y definir tu propio parsing de argumentos con <code>clap.parsers.default</code>. 💡</p>
<p>Es esencial manejar errores al analizar argumentos de la línea de comandos. En &lsquo;zig-clap&rsquo;, puedes usar la estructura <code>Diagnostics</code> para informar errores útiles. 🚑</p>
<ol start="2">
<li><strong>zig-args:</strong> Este es otro módulo de Zig para el análisis de argumentos de línea de comando. Proporciona funciones para analizar argumentos para una especificación dada y nuestro proceso actual, con opciones para manejar errores de análisis. También permite el uso de un método &lsquo;Verb&rsquo;, lo que significa que el primer argumento posicional se interpreta como un verbo que puede ser considerado un subcomando que proporciona más opciones específicas.</li>
</ol>
<p>A diferencia de clap, definimos las opciones y argumentos en una estructura que se rellenará al analizar los argumentos.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="kr">const</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">try</span><span class="w"> </span><span class="n">argsParser</span><span class="p">.</span><span class="n">parseForCurrentProcess</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// This declares long options for double hyphen
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="n">output</span><span class="o">:</span><span class="w"> </span><span class="o">?</span><span class="p">[]</span><span class="kr">const</span><span class="w"> </span><span class="kt">u8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">@</span><span class="s">&#34;with-offset&#34;</span><span class="o">:</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">@</span><span class="s">&#34;with-hexdump&#34;</span><span class="o">:</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="err">@</span><span class="s">&#34;intermix-source&#34;</span><span class="o">:</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">numberOfBytes</span><span class="o">:</span><span class="w"> </span><span class="o">?</span><span class="kt">i32</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">signed_number</span><span class="o">:</span><span class="w"> </span><span class="o">?</span><span class="kt">i64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">unsigned_number</span><span class="o">:</span><span class="w"> </span><span class="o">?</span><span class="kt">u64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">mode</span><span class="o">:</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">default</span><span class="p">,</span><span class="w"> </span><span class="n">special</span><span class="p">,</span><span class="w"> </span><span class="n">slow</span><span class="p">,</span><span class="w"> </span><span class="n">fast</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="n">default</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c1">// This declares short-hand options for single hyphen
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">    </span><span class="kr">pub</span><span class="w"> </span><span class="kr">const</span><span class="w"> </span><span class="n">shorthands</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">S</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;intermix-source&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;with-hexdump&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">O</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;with-offset&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">o</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;output&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">};</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">},</span><span class="w"> </span><span class="n">allocator</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">print</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">defer</span><span class="w"> </span><span class="n">options</span><span class="p">.</span><span class="n">deinit</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">options</span><span class="p">.</span><span class="n">executable_name</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="n">exe</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">std</span><span class="p">.</span><span class="n">debug</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;executable name: {s}</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="n">exe</span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">std</span><span class="p">.</span><span class="n">debug</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;parsed options:</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kr">inline</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="p">.</span><span class="n">meta</span><span class="p">.</span><span class="n">fields</span><span class="p">(</span><span class="nb">@TypeOf</span><span class="p">(</span><span class="n">options</span><span class="p">.</span><span class="n">options</span><span class="p">)))</span><span class="w"> </span><span class="o">|</span><span class="n">fld</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">std</span><span class="p">.</span><span class="n">debug</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\t</span><span class="s">{s} = {any}</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">fld</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nb">@field</span><span class="p">(</span><span class="n">options</span><span class="p">.</span><span class="n">options</span><span class="p">,</span><span class="w"> </span><span class="n">fld</span><span class="p">.</span><span class="n">name</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">std</span><span class="p">.</span><span class="n">debug</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;parsed positionals:</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">options</span><span class="p">.</span><span class="n">positionals</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="n">arg</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">std</span><span class="p">.</span><span class="n">debug</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\t</span><span class="s">&#39;{s}&#39;</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.{</span><span class="n">arg</span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h2 id="nuestro-propio-analizador-">Nuestro propio analizador 🤓<a hidden class="anchor" aria-hidden="true" href="#nuestro-propio-analizador-">#</a></h2>
<p>Usar una biblioteca probada es lo que uno debe hacer normalmente y no inventar la rueda a la primera de cambio. Pero estamos aquí para aprender y divertirnos con Zig, así que no vamos a dejar pasar la oportunidad de implementar nuestro propio analizador de argumentos de línea de comando. ¡Sí, lo has oído bien! 🎉🎉.</p>
<p>Aprenderás una cantidad increíble en el proceso. Vas a entender mejor cómo funcionan las cosas bajo el capó, cómo los argumentos pasan de la línea de comandos a tu programa y cómo puedes manipularlos para hacer exactamente lo que quieres. ¡Es como tener superpoderes! 💪🚀 Así que, poneros cómodos, preparaos una taza de vuestro café o te favorito ☕ y ¡vamos a ello, creemos nuestra propia biblioteca de análisis de argumentos de línea de comando: zig-argueando! 🎯</p>
<h2 id="convenciones-posix">Convenciones POSIX<a hidden class="anchor" aria-hidden="true" href="#convenciones-posix">#</a></h2>
<p>Nuestro analizado implementará, en general, las convenciones recomendadas por POSIX para los argumentos de la línea de comandos:</p>
<ul>
<li>Los argumentos son opciones cortas si comienzan con un delimitador de guión (<code>-</code>) más un caracter alfanuméricos individuales u opviones largar si empiezan con doble guión (<code>--</code>) con un nombre largo.</li>
<li>Varias opciones cortas pueden seguir a un delimitador de guión en un solo token si las opciones no toman argumentos. Por lo tanto, <code>-abc</code> es equivalente a <code>-a -b -c</code>. La última opción si podrá tener argumento.</li>
<li>Algunas opciones requieren un argumento. Por ejemplo, la opción -o del comando <code>ld</code> requiere un argumento, un nombre de archivo de salida.</li>
<li>Las opciones normalmente preceden a otros argumentos que no son opciones y que se llaman posicionales.</li>
<li>Los argumentos de las opciones pueden ir en el mismo token si la opción y su argumento está separado por un separador. Por ejemplo, <code>-a=foo</code> o <code>--name=value</code> en lugar de <code>-a foo</code> o <code>--name value</code></li>
<li>Un argumento que es exactamente doble guión (<code>--</code>) indica que a partir de ese argumentos todos los demás son posicionales.</li>
<li>Un argumento que es exactamente un guión (<code>-</code>) se tratará como posicional. Suele indicar entrada o salida estandar.</li>
<li>Las opciones se pueden suministrar en cualquier orden.</li>
</ul>
<p>Pero nos saldremos un poco de las convenciones en estos aspectos, por otra parte discutibles:</p>
<ul>
<li>Una opción y su argumento pueden aparecer o no como tokens separados. En otras palabras, el espacio en blanco que los separa es opcional. Por lo tanto, <code>-o foo</code> y <code>-ofoo</code> son equivalentes. Pero nuestro analizador no va a permitir esto ya que puede dar lugar a ambigüedades.</li>
<li>Los nombres de las opciones deben escribirse completamente y daremos la opción como desconocida si es parcial aunque no haya conflicto. Si la opción es <code>--host</code> no podrá escribirse como <code>--hos</code>, ni <code>--ho</code>, ni <code>--h</code>.</li>
<li>Las opciones pueden aparecer varias veces pero sólo si son opciones que lo permiten explícitamente o tienen el mismo valor. Nada de la última opción gana, buff.</li>
</ul>
<h2 id="necesitamos-un-plan">Necesitamos un plan<a hidden class="anchor" aria-hidden="true" href="#necesitamos-un-plan">#</a></h2>
<p>Estos son una serie de tareas iniciales para diseñar un parser de línea de comandos en Zig:</p>
<ol>
<li>
<p><strong>Diseñar la estructura de datos de los argumentos</strong></p>
<p>Define una estructura de datos que represente un argumento de línea de comandos. Esta estructura debe contener información como el nombre corto de la opción (si existe), el nombre largo (si existe), si la opción necesita un valor, y cualquier valor predeterminado o proporcionado por el usuario.</p>
</li>
<li>
<p><strong>Implementar la función de análisis de argumentos</strong></p>
<p>Esta función debería tomar la lista de argumentos proporcionados por el usuario (generalmente a través de <code>std.process.args()</code>) y llenar la estructura de datos definida anteriormente. Debe ser capaz de manejar tanto argumentos cortos (<code>-a</code>) como largos (<code>--arg</code>), y debe manejar correctamente los argumentos que requieren valores (<code>-o value</code> o <code>-o value</code> o <code>--option=value</code>). También debe ser capaz de manejar el caso especial de <code>--</code>, que indica el final de los argumentos.</p>
</li>
<li>
<p><strong>Implementar el manejo de errores</strong></p>
<p>Si el usuario proporciona un argumento que no se reconoce, o si se proporciona un valor para un argumento que no requiere uno, el parser debe ser capaz de manejar esto de manera elegante. Esto puede incluir la generación de mensajes de error útiles.</p>
</li>
<li>
<p><strong>Implementar funciones de ayuda</strong></p>
<p>Proporcionar funciones que generen automáticamente mensajes de ayuda basados en las estructuras de argumentos definidas. Esto puede incluir una descripción del comando y de cada argumento, si se requiere un valor, y cualquier valor predeterminado.</p>
</li>
<li>
<p><strong>Pruebas</strong></p>
<p>Probaremos completamente el parser de línea de comandos. Esto incluirá pruebas para argumentos cortos y largos, argumentos con y sin valores, el indicador <code>--</code>, y el manejo de errores.</p>
</li>
</ol>
<h2 id="fin-de-la-primera-parte-">Fin de la primera parte 🌟<a hidden class="anchor" aria-hidden="true" href="#fin-de-la-primera-parte-">#</a></h2>
<p>No te pierdas las siguientes partes donde comenzaremos a implementar el analizador explicando paso a paso lo que hacemos. ¡Nos vemos! Un ejemplo de lo que vamos a programar:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-zig" data-lang="zig"><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">const</span><span class="w"> </span><span class="n">clp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">comptime</span><span class="w"> </span><span class="n">Argueando</span><span class="p">.</span><span class="n">CommandLineParser</span><span class="p">.</span><span class="n">init</span><span class="p">(.{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">.</span><span class="n">header</span><span class="o">=</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="sh">\\    \                                                |        </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="sh">\\   _ \     __|  _` |  |   |   _ \   _` |  __ \    _` |   _ \  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="sh">\\  ___ \   |    (   |  |   |   __/  (   |  |   |  (   |  (   | </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="sh">\\_/    _\ _|   \__, | \__,_| \___| \__,_| _|  _| \__,_| \___/  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="sh">\\              |___/  </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">,.</span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[</span><span class="n">_</span><span class="p">]</span><span class="n">Argueando</span><span class="p">.</span><span class="n">Param</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">flagHelp</span><span class="p">(.{</span><span class="w"> </span><span class="p">.</span><span class="n">long</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;help&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">short</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;h&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">help</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;Shows this help.&#34;</span><span class="w"> </span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">flag</span><span class="p">(.{</span><span class="w"> </span><span class="p">.</span><span class="n">long</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;version&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">help</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;Output version information and exit.&#34;</span><span class="w"> </span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">flag</span><span class="p">(.{</span><span class="w"> </span><span class="p">.</span><span class="n">long</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;verbose&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">short</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;v&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">help</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;Enable verbose output.&#34;</span><span class="w"> </span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">option</span><span class="p">(.{</span><span class="w"> </span><span class="p">.</span><span class="n">long</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;port&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">short</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;p&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">parser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;TCP_PORT&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;1234&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">help</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;Listening Port.&#34;</span><span class="w"> </span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">option</span><span class="p">(.{</span><span class="w"> </span><span class="p">.</span><span class="n">long</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;host&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">short</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;H&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">parser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;TCP_HOST&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;localhost&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">help</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;Host name&#34;</span><span class="w"> </span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">singlePositional</span><span class="p">(.{</span><span class="w"> </span><span class="p">.</span><span class="n">parser</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;DIR&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;.&#34;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">check</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Check</span><span class="p">.</span><span class="n">Dir</span><span class="p">(.{</span><span class="w"> </span><span class="p">.</span><span class="n">mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">.</span><span class="n">read_only</span><span class="w"> </span><span class="p">}).</span><span class="n">f</span><span class="w"> </span><span class="p">}),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">        </span><span class="p">.</span><span class="n">desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;This command starts an HTTP Server and serves static content from directory DIR.&#34;</span><span class="p">,</span><span class="w"> </span><span class="c1">//
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">        </span><span class="p">.</span><span class="n">footer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;More info: &lt;https://d4c7.github.io/zig-zagueando/&gt;.&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">});</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kr">var</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clp</span><span class="p">.</span><span class="n">parseArgs</span><span class="p">(</span><span class="n">allocator</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">defer</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">deinit</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">helpRequested</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">printHelp</span><span class="p">(</span><span class="n">std</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">getStdErr</span><span class="p">().</span><span class="n">writer</span><span class="p">());</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">hasProblems</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">printProblems</span><span class="p">(</span><span class="n">std</span><span class="p">.</span><span class="n">io</span><span class="p">.</span><span class="n">getStdErr</span><span class="p">().</span><span class="n">writer</span><span class="p">(),</span><span class="w"> </span><span class="p">.</span><span class="n">AllProblems</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-plaintext" data-lang="plaintext"><span class="line"><span class="cl">    \                                                |        
</span></span><span class="line"><span class="cl">   _ \     __|  _` |  |   |   _ \   _` |  __ \    _` |   _ \  
</span></span><span class="line"><span class="cl">  ___ \   |    (   |  |   |   __/  (   |  |   |  (   |  (   | 
</span></span><span class="line"><span class="cl">_/    _\ _|   \__, | \__,_| \___| \__,_| _|  _| \__,_| \___/  
</span></span><span class="line"><span class="cl">              |___/  
</span></span><span class="line"><span class="cl">Usage: sample-argueando [(-h|--help)]
</span></span><span class="line"><span class="cl">    [--version] [(-v|--verbose)] [(-p|--port)=TCP_PORT] [(-H|--host)=TCP_HOST]
</span></span><span class="line"><span class="cl">    [DIR]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">This command starts an HTTP Server and serves static content from directory DIR.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  -h, --help             Shows this help.
</span></span><span class="line"><span class="cl">      --version          Output version information and exit.
</span></span><span class="line"><span class="cl">  -v, --verbose          Enable verbose output.
</span></span><span class="line"><span class="cl">  -p, --port=TCP_PORT    Listening Port.
</span></span><span class="line"><span class="cl">                         Default value: 1234
</span></span><span class="line"><span class="cl">  -H, --host=TCP_HOST    Host name
</span></span><span class="line"><span class="cl">                         Default value: localhost
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  TCP_PORT    TCP port value between 0 and 65535. Use port 0 to dynamically assign a port
</span></span><span class="line"><span class="cl">              Can use base prefix (0x,0o,0b). 
</span></span><span class="line"><span class="cl">  TCP_HOST    TCP host name or IP. 
</span></span><span class="line"><span class="cl">  DIR         Directory 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">More info: &lt;https://d4c7.github.io/zig-zagueando/&gt;.
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://d4c7.github.io/zig-zagueando/posts/un-analizador-de-linea-de-comandos-en-zig-2/">
    <span class="title">« Anterior</span>
    <br>
    <span>Un analizador de línea de comandos en Zig 🔧 (Parte II)</span>
  </a>
  <a class="next" href="https://d4c7.github.io/zig-zagueando/posts/zig-comptime/">
    <span class="title">Siguiente »</span>
    <br>
    <span>Zig comptime</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Un analizador de línea de comandos en Zig 🔧 (Parte I) on twitter"
        href="https://twitter.com/intent/tweet/?text=Un%20analizador%20de%20l%c3%adnea%20de%20comandos%20en%20Zig%20%f0%9f%94%a7%20%28Parte%20I%29&amp;url=https%3a%2f%2fd4c7.github.io%2fzig-zagueando%2fposts%2fun-analizador-de-linea-de-comandos-en-zig-1%2f&amp;hashtags=">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Un analizador de línea de comandos en Zig 🔧 (Parte I) on twitter"
        href="https://mastodon.social/share?text=Un%20analizador%20de%20l%c3%adnea%20de%20comandos%20en%20Zig%20%f0%9f%94%a7%20%28Parte%20I%29&amp;url=https%3a%2f%2fd4c7.github.io%2fzig-zagueando%2fposts%2fun-analizador-de-linea-de-comandos-en-zig-1%2f&amp;hashtags=">
        <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 134.98711 134.98711"  height="30px" width="30px" fill="currentColor">
            <path
            id="path173"
            style="stroke-width:0.263647"
            d="m 16.731795,0.23977865 c -9.1024158,0 -16.49201635,7.38992375 -16.49201635,16.49201635 V 118.73487 c 0,9.10226 7.38985565,16.49202 16.49201635,16.49202 H 118.73487 c 9.10214,0 16.49202,-7.38976 16.49202,-16.49202 V 16.731795 c 0,-9.1020926 -7.38961,-16.49201635 -16.49202,-16.49201635 z M 67.439294,10.841715 c 14.33843,-0.05813 28.783417,1.646195 36.594666,5.294251 0,0 15.91014,7.255352 15.91014,31.968591 0,0 0.20549,18.227747 -2.23449,30.892688 -1.55702,8.036749 -13.76419,16.8293 -27.786933,18.533753 -5.022382,0.607318 -23.265943,3.605592 -44.66084,-1.706356 -0.0048,1.181997 0.06971,2.368525 0.222208,3.541903 1.656724,12.607705 12.293926,13.366905 22.390882,13.722155 10.191884,0.33227 18.422648,-2.56831 18.422648,-2.56831 l 0.42633,9.38289 c 0,0 -6.280354,3.89032 -18.978686,4.60798 -6.997135,0.4035 -15.701008,-0.18203 -25.82168,-2.90215 -26.42692,-7.14414 -26.405106,-44.08773 -26.405106,-73.505069 0,-24.71324 15.937528,-31.968075 15.937528,-31.968075 7.40775,-3.415535 21.644915,-5.240421 35.983333,-5.294251 z m 15.973702,18.845362 c -4.915817,0.118459 -9.781729,2.307054 -12.784232,6.975801 L 67.745219,41.57679 64.852372,36.662878 C 61.861733,32.020326 57.007083,29.816291 52.094495,29.690694 v -0.0016 c -4.9126,-0.131685 -9.884165,1.806349 -13.109794,5.442562 -5.881561,6.821562 -4.589384,11.286347 -4.589384,42.018624 h 11.644767 v -26.7208 c 0,-12.50759 15.938045,-12.98127 15.938045,1.74408 V 67.656852 H 73.521094 V 52.17356 c 0,-14.724632 15.947347,-14.241724 15.947347,-1.733228 v 26.72085 h 11.617379 v -0.0098 c 0,-30.708592 1.31591,-35.144851 -4.589384,-42.018624 -3.201876,-3.612175 -8.167622,-5.564121 -13.08344,-5.445662 z" />    
       </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Un analizador de línea de comandos en Zig 🔧 (Parte I) on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fd4c7.github.io%2fzig-zagueando%2fposts%2fun-analizador-de-linea-de-comandos-en-zig-1%2f&amp;title=Un%20analizador%20de%20l%c3%adnea%20de%20comandos%20en%20Zig%20%f0%9f%94%a7%20%28Parte%20I%29&amp;summary=Un%20analizador%20de%20l%c3%adnea%20de%20comandos%20en%20Zig%20%f0%9f%94%a7%20%28Parte%20I%29&amp;source=https%3a%2f%2fd4c7.github.io%2fzig-zagueando%2fposts%2fun-analizador-de-linea-de-comandos-en-zig-1%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Un analizador de línea de comandos en Zig 🔧 (Parte I) on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fd4c7.github.io%2fzig-zagueando%2fposts%2fun-analizador-de-linea-de-comandos-en-zig-1%2f&title=Un%20analizador%20de%20l%c3%adnea%20de%20comandos%20en%20Zig%20%f0%9f%94%a7%20%28Parte%20I%29">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Un analizador de línea de comandos en Zig 🔧 (Parte I) on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fd4c7.github.io%2fzig-zagueando%2fposts%2fun-analizador-de-linea-de-comandos-en-zig-1%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Un analizador de línea de comandos en Zig 🔧 (Parte I) on whatsapp"
        href="https://api.whatsapp.com/send?text=Un%20analizador%20de%20l%c3%adnea%20de%20comandos%20en%20Zig%20%f0%9f%94%a7%20%28Parte%20I%29%20-%20https%3a%2f%2fd4c7.github.io%2fzig-zagueando%2fposts%2fun-analizador-de-linea-de-comandos-en-zig-1%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Un analizador de línea de comandos en Zig 🔧 (Parte I) on telegram"
        href="https://telegram.me/share/url?text=Un%20analizador%20de%20l%c3%adnea%20de%20comandos%20en%20Zig%20%f0%9f%94%a7%20%28Parte%20I%29&amp;url=https%3a%2f%2fd4c7.github.io%2fzig-zagueando%2fposts%2fun-analizador-de-linea-de-comandos-en-zig-1%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>
  </footer>

</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://d4c7.github.io/zig-zagueando/">Zig-zagueando Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copiar';

        function copyingDone() {
            copybutton.innerHTML = '¡copiado!';
            setTimeout(() => {
                copybutton.innerHTML = 'copiar';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
